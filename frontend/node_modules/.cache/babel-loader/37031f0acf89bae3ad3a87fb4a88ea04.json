{"ast":null,"code":"import _asyncToGenerator from\"/home/vm/Documents/Work/ToDoList/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/vm/Documents/Work/ToDoList/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/vm/Documents/Work/ToDoList/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/vm/Documents/Work/ToDoList/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/vm/Documents/Work/ToDoList/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/home/vm/Documents/Work/ToDoList/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from'react';import{RiCloseCircleLine}from'react-icons/ri';import{TiEdit}from'react-icons/ti';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ToDo=/*#__PURE__*/function(_Component){_inherits(ToDo,_Component);var _super=_createSuper(ToDo);function ToDo(props){var _this;_classCallCheck(this,ToDo);_this=_super.call(this,props);_this.handleSubmitAdd=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var texto;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();texto=_this.state.input;if(!texto||/^\\s*$/.test(texto)){_context.next=5;break;}_context.next=5;return fetch('http://localhost:3000/api/item/save',{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:texto})});case 5:_this.getItemsGET();//deberia cambiar esto por una solucion ajax. si me queda tiempo\n_this.setInput('');case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleSubmitEdit=function(e){// e.preventDefault();\nconsole.log(e.target.value);};_this.handleChange=function(e){_this.setInput(e.target.value);};_this.handleChangeCheckbox=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('http://localhost:3000/api/item/modify/'+e.target.id,{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify()//, checked: e.target.value})\n});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.handleSubmitDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch('http://localhost:3000/api/item/delete/'+e.target.id,{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify()//, checked: e.target.value})\n});case 2:_this.getItemsGET();//esto se podria hacer mas facil pero estoy corto de tiempo, saludos!\ncase 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.state={reload:Boolean,items:[],input:String};return _this;}_createClass(ToDo,[{key:\"getItemsGET\",value:function getItemsGET(){var _this2=this;fetch('http://localhost:3000/api/item/all').then(function(response){return response.json();}).then(function(data){_this2.setState({items:data});/*\n        console.log(data);\n        console.log(data.length);\n        for (var i = 0; i < data.length; i++) {\n          console.log(data[i].id); //por ahora solo guardemos id y name\n          console.log(data[i].name);\n          console.log(data[i].checked);\n          console.log(data[i].iconid);\n          console.log(data[i].folderid);\n          console.log(data[i].userid);\n        } */}).catch(function(error){return console.log(error);});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getItemsGET();}},{key:\"setInput\",value:function setInput(texto){document.getElementById('input-item').value=texto;this.setState({input:texto});}},{key:\"render\",value:function render(){var _this3=this;if(!this.state.input){this.state.input='';}var items=this.state.items;//    <input id={item.id} type='button' onClick={this.handleSubmitDelete}> Delete</input>\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[\"List of posts\",items.length?items.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{children:[item.checked?/*#__PURE__*/_jsx(\"input\",{id:item.id,value:\"1\",defaultChecked:true,type:\"checkbox\",onChange:_this3.handleChangeCheckbox}):/*#__PURE__*/_jsx(\"input\",{id:item.id,value:\"0\",type:\"checkbox\",onChange:_this3.handleChangeCheckbox}),/*#__PURE__*/_jsx(\"span\",{id:\"p\".concat(item.id),children:item.name}),/*#__PURE__*/_jsx(\"a\",{href:\"\",children:\" Edit\"}),/*#__PURE__*/_jsx(\"form\",{id:\"edit-item-form\".concat(item.id),onSubmit:_this3.handleSubmitEdit})]},item.id);}):null,/*#__PURE__*/_jsxs(\"form\",{className:\"add-item-form\",onSubmit:this.handleSubmitAdd,children:[/*#__PURE__*/_jsx(\"input\",{id:\"input-item\",type:\"text\",placeholder:\"Add a todo\",name:\"text\",className:\"todo-input\",onChange:this.handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"todo-button-item\",children:\" Add todo item\"})]})]});}}]);return ToDo;}(Component);export default ToDo;","map":{"version":3,"sources":["/home/vm/Documents/Work/ToDoList/frontend/src/components/ToDo.js"],"names":["React","Component","RiCloseCircleLine","TiEdit","ToDo","props","handleSubmitAdd","e","preventDefault","texto","state","input","test","fetch","method","headers","body","JSON","stringify","name","getItemsGET","setInput","handleSubmitEdit","console","log","target","value","handleChange","handleChangeCheckbox","id","handleSubmitDelete","reload","Boolean","items","String","then","response","json","data","setState","catch","error","document","getElementById","length","map","item","checked"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {RiCloseCircleLine} from 'react-icons/ri';\nimport {TiEdit} from 'react-icons/ti';\n\nclass ToDo extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      reload: Boolean,\n      items: [],\n      input: String,\n    }\n  }\n\n  getItemsGET(){\n    fetch('http://localhost:3000/api/item/all')\n      .then(response => response.json())\n      .then(data => {\n        this.setState({items: data});\n        /*\n        console.log(data);\n        console.log(data.length);\n        for (var i = 0; i < data.length; i++) {\n          console.log(data[i].id); //por ahora solo guardemos id y name\n          console.log(data[i].name);\n          console.log(data[i].checked);\n          console.log(data[i].iconid);\n          console.log(data[i].folderid);\n          console.log(data[i].userid);\n        } */\n      }).catch(error => console.log(error));\n  }\n\n  componentDidMount() {\n     this.getItemsGET();\n  }\n\n  setInput(texto){\n    document.getElementById('input-item').value = texto;\n    this.setState({input: texto});\n  }\n\n  handleSubmitAdd = async e => { \n    e.preventDefault();\n\n    let texto = this.state.input;\n\n    if (!(!texto || /^\\s*$/.test(texto))) {\n        await fetch('http://localhost:3000/api/item/save', {\n            method: 'POST',\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ name: texto})\n          })//.then(response => response.json()).then(dataa => idnueva = dataa[0].id)\n          //await fetch('http://localhost:3000/api/item/find('+idnueva+')').then(response => response.json())\n          //.then(dataaa => { this.setState.items[this.setState.items.length]=dataaa[0]});\n          //lo anterior por alguna razon no funciona, intentare una vez termine.\n      }\n      \n      this.getItemsGET(); //deberia cambiar esto por una solucion ajax. si me queda tiempo\n\n    this.setInput('');\n  };\n\n  handleSubmitEdit = e =>{\n    // e.preventDefault();\n    console.log(e.target.value);\n  };\n\n  handleChange = e => { \n    this.setInput(e.target.value);\n  };\n\n  handleChangeCheckbox = async e =>{\n    await fetch('http://localhost:3000/api/item/modify/'+e.target.id, {\n    method: 'POST',\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify()//, checked: e.target.value})\n    });\n  };\n\n  handleSubmitDelete = async e =>{\n    await fetch('http://localhost:3000/api/item/delete/'+e.target.id, {\n    method: 'POST',\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify()//, checked: e.target.value})\n    });\n    this.getItemsGET(); //esto se podria hacer mas facil pero estoy corto de tiempo, saludos!\n  };\n\n  render() {\n    if(!this.state.input){\n      this.state.input='';\n    }\n    const { items} = this.state;\n    //    <input id={item.id} type='button' onClick={this.handleSubmitDelete}> Delete</input>\n    return (<div>\n        List of posts\n        {\n              items.length ?\n              items.map(item => <div key={item.id}>\n                {item.checked ? \n                <input id={item.id} value=\"1\" defaultChecked type=\"checkbox\"  onChange={this.handleChangeCheckbox}/>  : \n                <input id={item.id} value=\"0\" type=\"checkbox\"  onChange={this.handleChangeCheckbox}/>  \n                }\n                <span id={`p${item.id}`}>{item.name}</span>       \n                <a href=\"\"> Edit</a>\n                <form id={`edit-item-form${item.id}`} onSubmit={this.handleSubmitEdit}>\n\n                </form>\n                </div>) : null \n        }\n              \n          <form className=\"add-item-form\" onSubmit={this.handleSubmitAdd}>\n            <input id=\"input-item\"\n                type='text' \n                placeholder='Add a todo' \n                name = 'text' \n                className='todo-input'\n                onChange={this.handleChange}\n            />\n            <button className='todo-button-item'> Add todo item</button>\n            \n        </form>\n    </div>);\n  }\n}\n\nexport default ToDo;\n"]},"metadata":{},"sourceType":"module"}